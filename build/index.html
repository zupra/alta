<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Index</title>
  <link href='https://fonts.googleapis.com/css?family=Roboto:400,700,300,300italic,400italic,700italic&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="./css/common.css">
  <!-- <link rel="stylesheet" href="./js/bower_components/fullpage.js/jquery.fullPage.css"> -->
</head>

<body>



  <div id="main" w3-include-html="./main.html"></div>


  <div id="fullpage" class="kineticScroll">



    <nav id="TEST_SECOND_NAV">
      <a href="">
        <svg width="18" height="14" viewBox="0 0 18 14">
          <g stroke-width="2" stroke="#000">
            <line x1="0" y1="1" x2="18" y2="1"></line>
            <line x1="0" y1="7" x2="18" y2="7"></line>
            <line x1="0" y1="13" x2="18" y2="13"></line>
          </g>
        </svg>
        &nbsp; Весь сайт </a>
      <a href="">О компании</a>
      <a href="">Продукция</a>
      <a href="">Монтаж</a>
      <a href="">Где купить </a>
      <a href="">Галерея</a>
    </nav>

    <!-- Не знаете что выбрать -->
    <div class="section">
      <section id="s_1" w3-include-html="./s_1.html"></section>
    </div>
    <!-- Какой цвет выбрать? -->
    <div class="section">
      <section w3-include-html="./s_2.html"></section>
    </div>
    <!-- Не знаете где купить? -->
    <div class="section">
      <section id="s_3" w3-include-html="./s_3.html"></section>
    </div>
    <!-- Что нужно знать о монтаже? -->
    <div class="section">
      <section w3-include-html="./s_4.html"></section>
    </div>
    <!-- Про что еще не забыть? -->
    <div class="section">
      <section w3-include-html="./s_5.html"></section>
    </div>



  </div>
  <!-- kineticScroll -->



  <!-- catalog -->
  <section w3-include-html="./to_catalog.html"></section>
  <!-- О компании -->
  <section id="about" w3-include-html="./about.html"></section>
  <!-- Фотографии -->
  <section id="photo" w3-include-html="./photo.html"></section>
  <!-- Новости -->
  <section id="news" w3-include-html="./news.html"></section>
  <footer w3-include-html="./footer.html"></footer>


</body>







<script>
   //helper
   (function() {
     //http://www.w3schools.com/howto/howto_html_include.asp
     myHTMLInclude();

     function myHTMLInclude() {
       var z, i, a, file, xhttp;
       z = document.getElementsByTagName("*");
       for (i = 0; i < z.length; i++) {
         if (z[i].getAttribute("w3-include-html")) {
           a = z[i].cloneNode(false);
           file = z[i].getAttribute("w3-include-html");
           var xhttp = new XMLHttpRequest();
           xhttp.onreadystatechange = function() {
             if (xhttp.readyState == 4 && xhttp.status == 200) {
               a.removeAttribute("w3-include-html");
               a.innerHTML = xhttp.responseText;
               z[i].parentNode.replaceChild(a, z[i]);
               myHTMLInclude();
             }
           }
           xhttp.open("GET", file, true);
           xhttp.send();
           return;
         }
       }
     }

   })();
 </script>





 <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>




<!-- https://cdnjs.com/libraries/fullPage.js -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.7/vendors/jquery.easings.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.7/vendors/jquery.slimscroll.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.7.7/jquery.fullPage.min.js"></script>



 <script>
 //$(function()
 $(document).ready(function() {



  function isElementInViewport(el) {
   var rect = el.getBoundingClientRect();
   return (
     rect.top >= 0 &&
     rect.bottom <= $(window).height()
   );
  }




  var totalSlides = $('#fullpage .section').length;


  //
  // $(window).scroll(function() {
  //   //window height
  //   var height = $(this).height();
  //   //current scroll
  //   var scrollTop = $(this).scrollTop();
  //
  //   //if scroll is less than window height we are still in the first part of the page
  //   if(scrollTop <= height) {
  //     //if true, animate the page scroll down
  //     $('html, body').animate({
  //       scrollTop: $("#fullpage").offset().top
  //     }, 1000, 'easeOutQuint', function() {
  //       //once we have run the animation, make it possible to scroll up normally
  //       // if(!isComplete) {
  //       //    isComplete = true;
  //       // }
  //     });
  //   }
  // });
  //





    $('#fullpage').fullpage({
      //scrollOverflow: true, //если контент выходит за границы
      //navigation: true, //кнопки по секциям
      //navigationTooltips //массив всплывающих подсказок

      //Design
      //verticalCentered: true,
      //resize : false,


      //afterLoad: function(anchorLink, index){},

      // afterLoad: function(anchorLink, index){
      //   if (index === totalSlides) {
      //     //$.fn.fullpage.setAutoScrolling(false);
      //     //$.fn.fullpage.destroy();
      //     $.fn.fullpage.destroy('all');
      //     //$.fn.fullpage.reBuild();
      //   }
      // }

    });




    //======================================

    $(window).scroll(function() {
      var scrollTop = $(this).scrollTop();

      //(scrollTop >= $(window).height() + 50)
      if (scrollTop >= $(window).height() + 20) {
        $("#TEST_SECOND_NAV").addClass("fixed");
        //$(".section-1").addClass("padding");

      } else {
        $("#TEST_SECOND_NAV").removeClass("fixed");
        //$(".section-1").removeClass("padding");
      }
    });



 });
 </script>



</html>
